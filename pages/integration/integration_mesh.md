---
title: Integration to MESH
keywords: spine, mesh, integration
tags: [integration, spine, mesh]
sidebar: overview_sidebar
permalink: integration_mesh.html
summary: "Overview of the role of MESH in GP Connect Messaging"
---

## Overview ##

<table class="requirement-box">
  <tr>
    <td><strong>GPCM-C-1</strong></td>
    <td>MESH <strong>MUST</strong> be used as the message transport mechanism</td>
  </tr>
</table>

MESH is the strategic platform for asynchronous messaging in the NHS.

Viewed very simply, MESH is like a [post-restante](https://en.wikipedia.org/wiki/Poste_restante) service for electronic message delivery. Messages flow around the NHS using MESH as follows:

1. Sender creates message and sends to the MESH server
2. MESH server places the message in the destination mailbox
3. Receiver collects the message from their inbox

Message senders and receivers have two options when connecting to the central MESH server: MESH API or the MESH client.

{% include note.html content="For a more complete introduction to MESH, including details on how to get going if your organisation does not yet have MESH connectivity, see [MESH - Message Exchange for Health and Social Care](https://digital.nhs.uk/services/message-exchange-for-social-care-and-health-mesh)." %} 


## Message routing ##

### To registered practice ###

Where message senders create messages destined for a patient's registered practice, MESH message automated message routing is encouraged.

Automated message routing enables a message sender to send a message to the MESH server without specifying a destination MESH mailbox ID. MESH takes care of routing the message to the mailbox of the patient's registered GP practice. This simplifies the task of message creation for the sending organisation.

Rather than specifying the destination mailbox ID, the message sender simply specifies the NHS Number, Surname and Date of Birth of the patient in the message header.

Refer to details below in the MESH API and MESH client sections for how to do this. 

### To alternative care providers ###

Where message senders create messages destined for alternative care providers, for example a community pharmacy, the MESH API **MUST** be used lookup the receiving organisation's MESH mailbox ID.

Details on how to use the MESH address lookup function can be found in the [MESH API specification](https://digital.nhs.uk/developer/api-catalogue/message-exchange-for-social-care-and-health-api#api-Endpoints-meshAddressLookup-0).

## MESH API ##

The [MESH API](https://digital.nhs.uk/developer/api-catalogue/message-exchange-for-social-care-and-health-api#api-description__overview) is a simple REST HTTP API which enables message senders to send messages through MESH. Please refer to the [MESH API](https://digital.nhs.uk/developer/api-catalogue/message-exchange-for-social-care-and-health-api#api-description__overview) specification for details.

When using the MESH endpoint lookup service, the Mex-To HTTP header is populated according to following syntactic conventions.

`<GPPROVIDER>[delimiter]<Nhs No>[delimiter]<d.o.b>[delimiter]<Surname>`

The underscore `_` character is used as the delimiter.

Date of birth is specified in `yyyyMMdd` format.

For example, when sending a message about a patient Mr Brian Smith, born 14 February 2001, with NHS Number 12345678, the Mex_To field will have the following value:

`GPPROVIDER_12345678_20010214_Smith`


## MESH Client ##

The [MESH Client](https://digital.nhs.uk/services/message-exchange-for-social-care-and-health-mesh/mesh-guidance-hub/client-user-guide#how-to-send-a-mesh-message) is an alternative means which organisations use to send and receive messages from the MESH central server infrastructure.

When using this automated means of message routing, the To_DTS field in the MESH message control (.ctl) file must be populated according to the same syntactic conventions described for the MESH API above.


## Workflow ID configuration ##

All messages which are sent to MESH specify a Workflow ID which identifies the workflow a particular data transfer is part of.

Each GP Connect Messaging use case will be grouped and associated with a single Workflow ID which has been created use with messages generated by those use cases only. 

Where the use case requires some form of ITK acknowledgement, an additional Workflow ID will be created to be used for acknowledgement messages generated for the use case.

Please refer to the applicable messaging use case details page for information on the Workflow ID to be used when generating particular messages. For example, when generating a message for the "Consultation Summary Report" use case, please refer to [Consultation Summary Report](senddocument_fedcon_mesh.html).

## Configuring MESH to enable message flow ##

The flow of messages through MESH is controlled through rules which are set in the following form:

`Mailbox ID` is allowed to `Send|Receive` messages with `Workflow ID`

For example, to enable a consultation report message to flow from GP0001 to GP0002, two rules need to be set up in MESH configuration:

- `GP0001` is allowed to `Send` messages with workflow ID `GPFED_CONSULT_REPORT`
- `GP0002` is allowed to `Receive` messages with workflow ID `GPFED_CONSULT_REPORT_ACK`

As GP Connect Messaging capabilities are delivered, MESH will therefore be configured to enable actual message flow between organisations. Note that the approach is based on *explicit opt in* to ensure particularly GP practices receive only those messages which they have consented to receive. 



