requirements:

- id: GPCM-SD-113
  area: payload
  description: "a Composition resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Composition-1\">CareConnect-Composition-1</a> resource <strong>MUST</strong> be present in the payload"
  tooltip: "a Composition resource profiled to CareConnect-Composition-1 resource MUST be present in the payload"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-114
  area: payload1
  description: "<code>Composition.status</code> <strong>MUST</strong> contain fixed value <strong><code>final</code></strong>"
  tooltip: "'status' MUST contain fixed value final"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-115
  area: payload1
  description: "<code>Composition.type</code> <strong>MUST</strong> contain the SNOMED code <code>371531000</code> (Report of clinical encounter)"
  tooltip: "'type' MUST contain the SNOMED code 371531000 (Report of clinical encounter)"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-116
  area: payload1
  description: "<code>Composition.date</code> <strong>MUST</strong> contain the date/time the message was created"
  tooltip: "'date' MUST contain the date/time the message was created"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-117
  area: payload1
  description: "<code>Composition.confidentiality</code> <strong>MUST</strong> contain the fixed value <code>N</code> (Normal), or <code>R</code> (Restricted) if the consultation is classed as confidential"
  tooltip: "'confidentiality' MUST contain either N or R"
  page: senddocument_fedcon_payload.html  

- id: GPCM-SD-118
  area: payload1
  description: "<code>Composition.title</code> <strong>MUST</strong> contain the fixed value <code>Consultation report</code>"
  tooltip: "'title' MUST contain fixed value Consultation report"
  page: senddocument_fedcon_payload.html  
  
- id: GPCM-SD-119
  area: payload1
  description: "<code>Composition.text</code> <strong>MUST</strong> contain a summary of request in the following format:<br/> <code>Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}*, ODS Code {ODS Code}*, Version {Version Number}</code><br /> * these items <strong>MUST NOT</strong> be displayed if the consultation has been flagged as restricted/confidential"
  tooltip: "'text' MUST contain a summary of request in the following format: Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}, ODS Code {ODS Code}, Version {Version Number}"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-120
  area: payload1
  description: "<code>Composition.subject</code> <strong>MUST</strong> contain a reference to Patient resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1\">CareConnect-Patient-1</a>"
  tooltip: "'subject' MUST contain a reference to Patient resource profiled to CareConnect-Patient-1"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-121
  area: payload1
  description: "<code>Composition.author</code> <strong>MUST</strong> contain a reference to a Practitioner resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Practitioner-1\">CareConnect-Practitioner-1</a>"
  tooltip: "'author' MUST contain a reference to a Practitioner resource profiled to CareConnect-Practitioner-1"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-122
  area: payload1
  description: "<code>Composition.custodian</code> <strong>MUST</strong> contain a reference to the sender Organization resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1\">CareConnect-Organization-1</a>"
  tooltip: "'custodian' MUST contain a reference to the sender Organization resource profiled to CareConnect-Organization-1"
  page: senddocument_fedcon_payload.html
  
- id: GPCM-SD-123
  area: payload1
  description: "<code>Composition.relatesTo</code> <strong>MUST</strong> contain the UUID of the previous message if a replacement document is being sent"
  tooltip: "'relatesTo' MUST contain contain the UUID of the previous message if a replacement document is being sent"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-124
  area: payload1
  description: "<code>Composition.section.entry</code> <strong>MUST</strong> reference a binary document which provides a report of the consultation in PDF format"
  tooltip: "'Composition.section.entry' MUST reference a binary document which provides a report of the consultation in PDF format"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-125
  area: payload3
  description: "where binary documents are included in the payload in addition to the Consultation Report, the <em>message receiver</em> <strong>MUST</strong> process these according ensuring all attachments remain in the context of the encounter information delivered to downstream systems"
  tooltip: "where binary documents are included in the payload in addition to the Consultation Report, the message receiver MUST process these according ensuring all attachments remain in the context of the encounter information delivered to downstream systems"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-028
  area: payload4
  description: "as described in <a href=\"senddocument_payload.html\">Send Document - Payload structure</a>, the payload <strong>MUST</strong> contain an organization resource describing the sender organisation (the originating organisation)"
  tooltip: "as described in Send Document - Payload structure, the payload MUST contain an organization resource describing the sender organisation"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-029
  area: payload5
  description: "the <code>odsOrganisationCode</code> slice of the <code>identifier</code> element <strong>MUST</strong> contain the ODS code"
  tooltip: "the 'odsOrganisationCode' slice of the 'identifier' element MUST contain the ODS code"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-030
  area: payload5
  description: "the <code>name</code> element <strong>MUST</strong> contain the name of the organisation"
  tooltip: "the 'name' element MUST contain the name of the organisation"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-031
  area: payload5
  description: "the <code>telecom</code> element <strong>MUST</strong> contain the telephone number of that organization. i.e. where <code>telecom.system</code> is set to a fixed value of <code>phone</code>, and <code>telecom.value</code> contains the telephone number"
  tooltip: "the 'telecom' element MUST contain the telephone number of that organization"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-032
  area: payload6
  description: "the SDS User ID of the practitioner <strong>MUST</strong> be present in the <code>sdsUserID</code> slice of the <code>identifier</code> element"
  tooltip: "the SDS User ID of the practitioner MUST be present in the 'sdsUserID' slice of the 'identifier' element"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-033
  area: payload6
  description: "the name of the practitioner <strong>MUST</strong> be present in the single instance of the <code>name</code> element where <code>name.use</code> is set to <code>official</code>"
  tooltip: "the name of the practitioner MUST be present in the single instance of the 'name' element where 'name.use' is set to 'official'"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-034
  area: payload6
  description: "telephone contact details <strong>MUST</strong> be present if available in the <code>Telecom</code> element. i.e. <code>telecom.system</code> is set to a fixed value of <code>phone</code>, and <code>telecom.value</code> contains the telephone number"
  tooltip: "telephone contact details MUST be present if available in the 'Telecom' element"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-035
  area: payload7
  description: "the NHS Number of the patient <strong>MUST</strong> be specified in the <code>nhsNumber</code> slice of the <code>identifier</code> element"
  tooltip: "the NHS Number of the patient MUST be specified in the 'nhsNumber' slice of the 'identifier' element"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-036
  area: payload7
  description: "the name of the patient <strong>MUST</strong> be present in the single instance of the <code>name</code> element where <code>name.use</code> is set to <code>official</code>"
  tooltip: "the name of the patient MUST be present in the single instance of the 'name<' element where 'name.use' is set to 'official'"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-037
  area: payload7
  description: "the date of birth of the patient <strong>MUST</strong> be specified in <code>YYYY-MM-DD</code> format in the <code>birthDate</code> element. Birth time is not required"
  tooltip: "the date of birth of the patient MUST be specified in 'YYYY-MM-DD' format in the 'birthDate' element; Birth time is not required"
  page: senddocument_fedcon_payload.html

- id: GPCM-SD-038
  area: payload7
  description: "values specified in the patient resource for surname, date of birth and NHS Number <strong>MUST</strong> match those specified in MESH metadata <code>To_DTS</code> field (for the MESH client) or <code>Mex_To</code> (for the MESH API) as described in <a href=\"senddocument_fedcon_mesh.html\">MESH message configuration</a>"
  tooltip: "values specified in the patient resource for surname, date of birth and NHS Number MUST match those specified in MESH metadata 'To_DTS' field or 'Mex_To' as described in MESH Message Configuration"
  page: senddocument_fedcon_payload.html






#ITK3 requirements
- id: GPCM-SD-039
  area: itk
  description: "when sending to the primary recipient (the care provider expected to action the message) the <code>RecipientType</code> <strong>MUST</strong> be set to fixed value of <code>FA</code> ('For action') taken from FHIR ValueSet <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-RecipientType-1\">ITK-RecipientType-1</a> <br/>  <br/>The meaning of <code>RecipientType</code> is applied in a common way across all ITK3 messaging.  \"For action\" in this case indicates that the recipient is expected to take  action. <br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>."
  tooltip: "'RecipientType' MUST be set to fixed value of 'FA<' (For action) taken from FHIR ValueSet ITK-RecipientType-1 when sending to primary recipient"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-040
  area: itk
  description: "<code>BusAckRequested</code> <strong>MUST</strong> be set to fixed value of <code>true</code>. This will request an ITK3 Response with a response code in the range 30001 to 30003.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'BusAckRequested' MUST be set to fixed value of 'true'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-041
  area: itk
  description: "<code>InfAckRequested</code> <strong>MUST</strong> be set to fixed value of <code>true</code>. This will request an ITK3 Response with a response code in the range 10001 to 20013.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'InfAckRequested' MUST be set to fixed value of 'true'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-042
  area: itk
  description: "<code>SenderReference</code> <strong>MUST</strong> be set to the unique identifier of the encounter which has taken place at the sender organisation.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'SenderReference' MUST be set to the unique identifier of the encounter which has taken place at the sender organisation"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-043
  area: itk
  description: "<code>MessageDefinition</code> <strong>MUST</strong> be set to fixed value of <code>https://fhir.nhs.uk/STU3/MessageDefinition/ITK-GPConnectSendDocument-MessageDefinition-1</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'MessageDefinition' MUST be set to fixed value of 'https://fhir.nhs.uk/STU3/MessageDefinition/ITK-GPConnectSendDocument-MessageDefinition-1'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-044
  area: itk
  description: "<code>LocalExtension</code> <strong>MUST</strong> be set to fixed value of <code>SendDocument-Generic</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'LocalExtension' MUST be set to fixed value of 'SendDocument-ConsultationReport'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-045
  area: itk
  description: "<code>Sender</code> <strong>MUST</strong> contain a reference to the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1\">CareConnect-ITK-Header-Organization-1</a> resource present in the FHIR message bundle"
  tooltip: "'Sender' MUST contain a reference to the CareConnect-ITK-Header-Organization-1 resource present in the FHIR message bundle"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-046
  area: itk
  description: "<code>Source</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender"
  tooltip: "'Source' MUST contain the MESH mailbox ID of the sender"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-047
  area: itk
  description: "<code>Event</code> <strong>MUST</strong> contain a fixed value of <code>ITK007C</code> from code system <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2\">ITK-MessageEvent-2</a>"
  tooltip: "'Event' MUST contain a fixed value of 'ITK007C' from code system ITK-MessageEvent-2"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-048
  area: itk
  description: "<code>Timestamp</code> <strong>MUST</strong> contain the date/time when the message was generated. (A separate process such as the MESH client may be responsible for sending the message at a later date/time.)"
  tooltip: "'Timestamp' MUST contain the date/time when the message was generated"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-049
  area: itk1
  description: "<code>destination</code> and <code>receiver</code> <strong>MUST NOT</strong> be present. Rather, <a href=\"senddocument_fedcon_mesh.html\">MESH message routing</a> will be used to route message to registered GP practice by NHS Number, DOB and Surname"
  tooltip: "'destination' and 'receiver' MUST NOT be present"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-050
  area: itk2
  description: "<code>BusAckRequested</code> <strong>MUST</strong> contain a fixed value of <code>false</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'BusAckRequested' MUST contain a fixed value of 'false'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-051
  area: itk2
  description: "<code>InfAckRequested</code> <strong>MUST</strong> contain a fixed value of <code>false</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'InfAckRequested' MUST contain a fixed value of 'false'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-052
  area: itk2
  description: "<code>SenderReference</code> <strong>MUST</strong> contain the same unique identifier generated by GPCM-SD-042.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'SenderReference' MUST contain the same unique identifier generated by GPCM-SD-042"
  page: senddocument_fedcon_itk3.html
  
- id: GPCM-SD-053
  area: itk2
  description: "<code>Sender</code> <strong>MUST</strong> contain a reference to an <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1\">CareConnect-ITK-Header-Organization-1</a> resource present in the FHIR message bundle" 
  tooltip: "'Sender' MUST contain a reference to an CareConnect-ITK-Header-Organization-1 resource present in the FHIR message bundle" 
  page: senddocument_fedcon_itk3.html
 
- id: GPCM-SD-054
  area: itk2
  description: "<code>Event</code> <strong>MUST</strong> contain a fixed value of <code>ITK008M</code> from code system <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2\">ITK-MessageEvent-2</a>"  
  tooltip: "'Event<' MUST contain a fixed value of 'ITK008M' from code system ITK-MessageEvent-2"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-055
  area: itk2
  description: "<code>Timestamp</code> <strong>MUST</strong> contain the date/time when the response was generated."
  tooltip: "'Timestamp' MUST contain the date/time when the message was generated"
  page: senddocument_fedcon_itk3.html

#MESH requirements 
- id: GPCM-SD-056
  area: mesh
  description: "all messages sent through this use case <strong>MUST</strong> use MESH automated message routing in order to ensure that the message is routed correctly to the registered practice of the patient"
  tooltip: "all messages sent through this use case MUST use MESH automated message routing in order to ensure that the message is routed correctly to the registered practice of the patient"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-057
  area: mesh1
  description: "each instance of a Consultation Report message <strong>MUST</strong> include the following MESH Workflow ID in the MESH message metadata: <code>GPFED_CONSULT_REPORT</code>"
  tooltip: "each instance of a Consultation Report message MUST include the following MESH Workflow ID in the MESH message metadata: 'GPFED_CONSULT_REPORT'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-058
  area: mesh1
  description: "each instance of an acknowledgement message generated as a result of receipt of a Consultation Report message <strong>MUST</strong> include the following Workflow ID in the MESH message metadata: <code>GPFED_CONSULT_REPORT_ACK</code>"
  tooltip: "each instance of an acknowledgement message generated as a result of receipt of a Consultation Report message MUST include the following Workflow ID in the MESH message metadata: 'GPFED_CONSULT_REPORT_ACK'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-059
  area: mesh2
  description: "<code>From_DTS</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender of the message – in this case the originating organisation"
  tooltip: "'From_DTS' MUST contain the MESH mailbox ID of the sender of the message"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-060
  area: mesh2
  description: "<code>To_DTS</code> <strong>MUST</strong> contain the NHS Number, DOB and Surname of the patient delimited by the underscore character ‘_'. This enables automatic routing of the message to the registered GP MESH mailbox"
  tooltip: "'To_DTS' MUST contain the NHS Number, DOB and Surname of the patient delimited by the underscore character '_'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-061
  area: mesh2
  description: "<code>Subject</code> <strong>MUST</strong> contain <code>To</code> text in the following format:<br/><br/><code>Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}, ODS Code {ODS Code}</code>"
  tooltip: "'Subject' MUST contain 'To 'text in the following format: 'Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}, ODS Code {ODS Code}'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-062
  area: mesh3
  description: "<code>Mex-From</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender of the message – in this case the originating organisation"
  tooltip: "'Mex-From' MUST contain the MESH mailbox ID of the sender of the message"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-063
  area: mesh3
  description: "<code>Mex-To</code> <strong>MUST</strong> contain the NHS Number, DOB and Surname of the patient delimited by the underscore character ‘_'. This enables automatic routing of the message to the registered GP MESH mailbox"
  tooltip: "'Mex-To' MUST contain the NHS Number, DOB and Surname of the patient delimited by the underscore character '_'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-064
  area: mesh3
  description: "<code>Mex-Subject</code> <strong>MUST</strong> contain <code>To</code> text in the following format:<br/><br/><code>Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}, ODS Code {ODS Code}</code>"
  tooltip: "'Mex-Subject' MUST contain 'To' text in the following format: 'Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}, ODS Code {ODS Code}'"
  page: senddocument_fedcon_mesh.html
    
- id: "None"
  area: na
  description: "None applicable"
  tooltip: "no requirements are documented in this specification for this user story"
  page:
  
- id: "GFR"
  area: na
  description: "Generic FHIR receiver"
  tooltip: "requirements delivered by the Generic FHIR receiver"
  page: 
  
- id: "ITK"
  area: na
  description: "ITK"
  tooltip: "requirements delivered by ITK"
  page: 