requirements:

# OC general payload requirements
- id: GPCM-SD-OC-001
  area: payload
  description: "a Composition resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Composition-1\">CareConnect-Composition-1</a> resource <strong>MUST</strong> be present in the payload"
  tooltip: "a Composition resource profiled to CareConnect-Composition-1 resource MUST be present in the payload"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-002
  area: payload1
  description: "<code>Composition.status</code> <strong>MUST</strong> contain fixed value <strong><code>final</code></strong>"
  tooltip: "'status' MUST contain fixed value final"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-003
  area: payload1
  description: "<code>Composition.type</code> <strong>MUST</strong> contain the SNOMED code <code>xxxxxxxxxx</code> (Online consultation report)"
  tooltip: "'type' MUST contain the SNOMED code xxxxxxxxx (Online consultation report)"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-004
  area: payload1
  description: "<code>Composition.date</code> <strong>MUST</strong> contain the date/time the message was created"
  tooltip: "'date' MUST contain the date/time the message was created"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-005
  area: payload1
  description: "<code>Composition.confidentiality</code> <strong>MUST</strong> contain the fixed value <code>N</code> (Normal), or <code>R</code> (Restricted) if the consultation is classed as confidential"
  tooltip: "'confidentiality' MUST contain either N or R"
  page: senddocument_oc_payload.html  

- id: GPCM-SD-OC-006
  area: payload1
  description: "<code>Composition.title</code> <strong>MUST</strong> contain the fixed value <code>Online consultation report</code>"
  tooltip: "'title' MUST contain fixed value Online consultation report"
  page: senddocument_oc_payload.html  
  
- id: GPCM-SD-OC-007
  area: payload1
  description: "<code>Composition.text</code> <strong>MUST</strong> contain a summary of request in the following format:<br/> <code>Online consultation report for {Patient Name} , NHS Number {NHS Number}, Version {Version Number}</code>"
  tooltip: "'text' MUST contain a summary of request in the following format: Online consultation report for {Patient Name} , NHS Number {NHS Number}, Version {Version Number}"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-008
  area: payload1
  description: "<code>Composition.subject</code> <strong>MUST</strong> contain a reference to Patient resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1\">CareConnect-Patient-1</a>"
  tooltip: "'subject' MUST contain a reference to Patient resource profiled to CareConnect-Patient-1"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-009
  area: payload1
  description: "<code>Composition.author</code> <strong>MUST</strong> contain a reference to a Practitioner resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Practitioner-1\">CareConnect-Practitioner-1</a>, or a reference to a Device resource profiled to <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/GPConnect-Device-1\">GPConnect-Device-1</a>"
  tooltip: "'author' MUST contain a reference to a Practitioner resource profiled to CareConnect-Practitioner-1, or a reference to a Device resource profiled to GPConnect-Device-1"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-010
  area: payload1
  description: "<code>Composition.custodian</code> <strong>MUST</strong> contain a reference to the sender Organization resource profiled to <a href=\"https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1\">CareConnect-Organization-1</a>"
  tooltip: "'custodian' MUST contain a reference to the sender Organization resource profiled to CareConnect-Organization-1"
  page: senddocument_oc_payload.html
  
- id: GPCM-SD-OC-011
  area: payload1
  description: "<code>Composition.relatesTo</code> <strong>MUST</strong> contain the UUID of the previous message if a replacement document is being sent"
  tooltip: "'relatesTo' MUST contain contain the UUID of the previous message if a replacement document is being sent"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-012
  area: payload1
  description: "<code>Composition.section.entry</code> <strong>MUST</strong> reference a binary document which provides a report of the full online consultation in PDF format profiled to <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-Attachment-Binary-1\">ITK-Attachment-Binary-1</a>"
  tooltip: "'Composition.section.entry' MUST reference a binary document which provides a report of the full online consultation in PDF format profiled to ITK-Attachment-Binary-1"
  page: senddocument_oc_payload.html
  
# Additional input elements
- id: GPCM-SD-OC-013
  area: payload3
  description: "where binary documents are included in the payload in addition to the Online Consultation Report, the <em>message receiver</em> <strong>MUST</strong> process these according ensuring all attachments remain in the context of the encounter information delivered to downstream systems"
  tooltip: "where binary documents are included in the payload in addition to the Online Consultation Report, the message receiver MUST process these according ensuring all attachments remain in the context of the encounter information delivered to downstream systems"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-014
  area: payload3
  description: "when displaying the Consultation Report in the practice workflow/task list, the <em>message receiver</em> <strong>MUST</strong> display the Subject contained in the MESH .CTL file:<br/> <code>Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}*, ODS Code {ODS Code}*</code><br /> * these items <strong>MUST NOT</strong> be displayed if the consultation has been flagged as confidential"
  tooltip: "when displaying the Consultation Report in the practice workflow/task list, the message receiver MUST display the Subject contained in the MESH .CTL file: 'Consultation report for {Patient Name} , NHS Number {NHS Number}, seen at {Practice Name}, ODS Code {ODS Code}'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-015
  area: payload3
  description: "the <em>message receiver</em> <strong>MUST</strong> make any attachments included with the Consultation Report available to the end user"
  tooltip: "the message receiver MUST make any attachments included with the Consultation Report available to the end user"
  page: senddocument_oc_payload.html

#Patient resource requirements
- id: GPCM-SD-OC-016
  area: payload8a
  description: "as described in <a href=\"senddocument_payload.html\">Send Document - Payload structure</a>, the payload <strong>MUST</strong> contain a patient resource describing the patient"
  tooltip: "as described in Send Document - Payload structure, the payload MUST contain a patient resource describing the patient"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-017
  area: payload8
  description: "the NHS Number of the patient <strong>MUST</strong> be specified in the <code>nhsNumber</code> slice of the <code>identifier</code> element"
  tooltip: "the NHS Number of the patient MUST be specified in the 'nhsNumber' slice of the 'identifier' element"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-018
  area: payload8
  description: "the name of the patient <strong>MUST</strong> be present in the single instance of the <code>name</code> element where <code>name.use</code> is set to <code>official</code>"
  tooltip: "the name of the patient MUST be present in the single instance of the 'name<' element where 'name.use' is set to 'official'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-019
  area: payload8
  description: "the date of birth of the patient <strong>MUST</strong> be specified in <code>YYYY-MM-DD</code> format in the <code>birthDate</code> element. Birth time is not required"
  tooltip: "the date of birth of the patient MUST be specified in 'YYYY-MM-DD' format in the 'birthDate' element; Birth time is not required"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-020
  area: payload8
  description: "values specified in the patient resource for surname, date of birth and NHS Number <strong>MUST</strong> match those specified in MESH metadata <code>Mex_To</code> (for the MESH API) or <code>To_DTS</code> field (for the MESH client) as described in <a href=\"senddocument_oc_mesh.html\">MESH message configuration</a>"
  tooltip: "values specified in the patient resource for surname, date of birth and NHS Number MUST match those specified in MESH metadata 'To_DTS' field or 'Mex_To' as described in MESH Message Configuration"
  page: senddocument_oc_payload.html

# Organization resource requirements
- id: GPCM-SD-OC-021
  area: payload4
  description: "as described in <a href=\"senddocument_payload.html\">Send Document - Payload structure</a>, the payload <strong>MUST</strong> contain an organization resource describing the sender organisation (the originating organisation)"
  tooltip: "as described in Send Document - Payload structure, the payload MUST contain an organization resource describing the sender organisation"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-022
  area: payload5
  description: "the <code>odsOrganisationCode</code> slice of the <code>identifier</code> element <strong>MUST</strong> contain the ODS code"
  tooltip: "the 'odsOrganisationCode' slice of the 'identifier' element MUST contain the ODS code"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-023
  area: payload5
  description: "the <code>name</code> element <strong>MUST</strong> contain the name of the organisation"
  tooltip: "the 'name' element MUST contain the name of the organisation"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-024
  area: payload5
  description: "the <code>telecom</code> element <strong>MUST</strong> contain the telephone number of that organization. i.e. where <code>telecom.system</code> is set to a fixed value of <code>phone</code>, and <code>telecom.value</code> contains the telephone number"
  tooltip: "the 'telecom' element MUST contain the telephone number of that organization"
  page: senddocument_oc_payload.html

# Practitioner resource requirements
- id: GPCM-SD-OC-025
  area: payload6
  description: "the SDS User ID of the practitioner <strong>MUST</strong> be present in the <code>sdsUserID</code> slice of the <code>identifier</code> element"
  tooltip: "the SDS User ID of the practitioner MUST be present in the 'sdsUserID' slice of the 'identifier' element"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-026
  area: payload6
  description: "the name of the practitioner <strong>MUST</strong> be present in the single instance of the <code>name</code> element where <code>name.use</code> is set to <code>official</code>"
  tooltip: "the name of the practitioner MUST be present in the single instance of the 'name' element where 'name.use' is set to 'official'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-027
  area: payload6
  description: "telephone contact details <strong>MUST</strong> be present if available in the <code>telecom</code> element. i.e. <code>telecom.system</code> is set to a fixed value of <code>phone</code>, and <code>telecom.value</code> contains the telephone number"
  tooltip: "telephone contact details MUST be present if available in the 'telecom' element"
  page: senddocument_oc_payload.html

# Device resource requirements
- id: GPCM-SD-OC-028
  area: payload7
  description: "a SNOMED code describing the type of device <strong>MUST</strong> be present in the <code>type</code> element"
  tooltip: "a SNOMED code describing the type of device MUST be present in the 'type' element"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-029
  area: payload7
  description: "the manufacturer of the device <strong>MUST</strong> be present in the <code>manufacturer</code> element"
  tooltip: "the manufacturer of the device MUST be present in the 'manufacturer' element"
  page: senddocument_oc_payload.html

# List requirements
- id: GPCM-SD-OC-030
  area: payload9a
  description: "a <code>List</code> containing references to all Observation resources that are captured <strong>MUST</strong> be populated if coded Observations are being sent. The <code>List</code> resource in FHIR is used to manage collections of resources."
  tooltip: "a 'List' containing references to all Observation resources that are captured MUST be populated if coded Observations are being sent"
  page: senddocument_oc_payload.html
  
- id: GPCM-SD-OC-031
  area: payload9a
  description: "the <code>status</code> element <strong>MUST</strong> contain a fixed value of <code>current</code>"
  tooltip: "the 'status' element MUST contain a fixed value of 'current'"
  page: senddocument_oc_payload.html  
  
- id: GPCM-SD-OC-032
  area: payload9a
  description: "the <code>mode</code> element <strong>MUST</strong> contain a fixed value of <code>snapshot</code>"
  tooltip: "the 'mode' element MUST contain a fixed value of 'snapshot'"
  page: senddocument_oc_payload.html   

- id: GPCM-SD-OC-033
  area: payload9a
  description: "the <code>title</code> element <strong>MUST</strong> contain the <code>display</code> element from the <code>code</code> field"
  tooltip: "the 'title' element MUST contain contain the 'display' element from the 'code' field"
  page: senddocument_oc_payload.html 

- id: GPCM-SD-OC-034
  area: payload9a
  description: "the <code>code</code> element <strong>MUST</strong> contain <code>826501000000100</code> - Miscellaneous record"
  tooltip: "the 'code' element MUST contain contain '826501000000100' - Miscellaneous record'"
  page: senddocument_oc_payload.html 
  
- id: GPCM-SD-OC-035
  area: payload9a
  description: "the <code>subject</code> element <strong>MUST</strong> reference the <code>Patient</code> profile representing the Patient against whom the data was recorded"
  tooltip: "the 'subject' element MUST reference the 'Patient' profile representing the Patient against whom the data was recorded"
  page: senddocument_oc_payload.html
  
- id: GPCM-SD-OC-036
  area: payload9a
  description: "the <code>entry.item</code> element <strong>MUST</strong> be populated to reference each <code>Observation</code> in the message"
  tooltip: "the 'entry.item' elements MUST be populated to reference each 'Observation' in the message"
  page: senddocument_oc_payload.html  

# Observation resource requirements
- id: GPCM-SD-OC-037
  area: payload9
  description: "the <code>status</code> element <strong>MUST</strong> contain a fixed value of <code>final</code>"
  tooltip: "the 'status' element MUST contain a fixed value of 'final'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-038
  area: payload9
  description: "the <code>category</code> element <strong>SHOULD</strong> contain high level category that represents the data in the <code>Observation</code>"
  tooltip: "the 'category' element SHOULD contain high level category that represents the data in the 'Observation'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-039
  area: payload9
  description: "the <code>code</code> element <strong>MUST</strong> contain a clinical code that represents the data in the <code>Observation</code>"
  tooltip: "the 'code' element MUST a clinical code that represents the data in the 'Observation'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-040
  area: payload9
  description: "the <code>subject</code> element <strong>MUST</strong> reference the <code>Patient</code> profile representing the Patient against whom the data was recorded"
  tooltip: "the 'subject' element MUST reference the 'Patient' profile representing the Patient against whom the data was recorded"
  page: senddocument_oc_payload.html
  
- id: GPCM-SD-OC-041
  area: payload9
  description: "the <code>issued</code> element <strong>MUST</strong> contain an audit trail timestamp representing when the data was recorded"
  tooltip: "the 'issued' element MUST reference to the 'Patient' profile representing the Patient against whom the data was recorded"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-042
  area: payload9
  description: "to ensure the <code>Observation</code> can be identified as patient entered data, the <code>performer</code> element <strong>MUST</strong> contain a reference to patient resource of the patient completing the Online Consultation"
  tooltip: "to ensure the 'Observation' can be identified as patient entered data, the 'performer' element MUST contain a reference to patient resource of the patient completing the Online Consultation"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-043 xxxx
  area: payload9
  description: "to ensure the <code>Observation</code> can be identified as patient entered data, the <code>performer</code> element <strong>MUST</strong> contain a reference to patient resource of the patient completing the Online Consultation"
  tooltip: "to ensure the 'Observation' can be identified as patient entered data, the 'performer' element MUST contain a reference to patient resource of the patient completing the Online Consultation"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-044
  area: payload9
  description: "the <code>value[x]</code> element <strong>SHOULD</strong> contain the value of the <code>Observation</code>"
  tooltip: "the 'value[x]' element SHOULD contain the value of the 'Observation'"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-045
  area: payload9
  description: "the <code>component</code> element <strong>SHOULD</strong> be populated if recording a pair of results"
  tooltip: "the 'component' element SHOULD be populated if recording a pair of results"
  page: senddocument_oc_payload.html

# QuestionnaireResponse resource requirements
- id: GPCM-SD-OC-046
  area: payload10
  description: "the <code>status</code> element <strong>MUST</strong> contain a fixed value of <code>completed</code>"
  tooltip: "the 'status' element MUST contain a fixed value of 'completed'"
  page: senddocument_oc_payload.html  

- id: GPCM-SD-OC-047
  area: payload10
  description: "the <code>subject</code> element <strong>MUST</strong> reference the <code>Patient</code> profile representing the Patient against whom the data was recorded"
  tooltip: "the 'subject' element MUST reference the 'Patient' profile representing the Patient against whom the data was recorded"
  page: senddocument_oc_payload.html
  
- id: GPCM-SD-OC-048
  area: payload10
  description: "the <code>authored</code> element <strong>SHOULD</strong> contain an audit trail timestamp representing when the data was recorded"
  tooltip: "the 'authored' element SHOULD reference to the 'Patient' profile representing the Patient against whom the data was recorded"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-049
  area: payload10
  description: "a set of <code>item</code> elements <strong>MUST</strong> contain the full online consultation questionnaire details"
  tooltip: "a set of 'item' elements MUST contain the full questionnaire details"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-050
  area: payload10
  description: "the <code>item.linkId</code> element <strong>MUST</strong> contain a pointer specific to the questionnaire"
  tooltip: "the 'item.linkId' elements MUST contain a pointer specific to the questionnaire"
  page: senddocument_oc_payload.html
  
- id: GPCM-SD-OC-051
  area: payload10
  description: "the <code>item.text</code> element <strong>MUST</strong> contain the question being asked"
  tooltip: "the 'item.text' elements MUST contain the question being asked"
  page: senddocument_oc_payload.html  

- id: GPCM-SD-OC-052
  area: payload10
  description: "the <code>item.answer.value[x]</code> element <strong>MUST</strong> contain the answer being given by the patient"
  tooltip: "the 'item.text' elements MUST contain the question being asked"
  page: senddocument_oc_payload.html 
  
#Location resource requirements
- id: GPCM-SD-OC-053
  area: payload11
  description: "the <code>identifier (odsSiteCode)</code> element <strong>MUST</strong> contain the ODS code of the patient's preferred community pharmacy"
  tooltip: "the <'identifier (odsSiteCode)' element MUST contain the ODS code of the patient's preferred community pharmacy"
  page: senddocument_oc_payload.html

- id: GPCM-SD-OC-054
  area: payload11
  description: "telephone contact details <strong>MUST</strong> be present if available in the <code>telecom</code> element. i.e. <code>telecom.system</code> is set to a fixed value of <code>phone</code>, and <code>telecom.value</code> contains the telephone number"
  tooltip: "telephone contact details MUST be present if available in the 'telecom' element"
  page: senddocument_oc_payload.html

#Consent resource requirements  
#Add if required  
  
#ITK3 requirements
- id: GPCM-SD-OC-055
  area: itk
  description: "when sending to the primary recipient (the care provider expected to action the message) the <code>RecipientType</code> <strong>MUST</strong> be set to fixed value of <code>FA</code> ('For action') taken from FHIR ValueSet <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-RecipientType-1\">ITK-RecipientType-1</a> <br/>  <br/>The meaning of <code>RecipientType</code> is applied in a common way across all ITK3 messaging.  \"For action\" in this case indicates that the recipient is expected to take  action. <br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>."
  tooltip: "'RecipientType' MUST be set to fixed value of 'FA<' (For action) taken from FHIR ValueSet ITK-RecipientType-1 when sending to primary recipient"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-056
  area: itk
  description: "when sending a copy message to the patient's registered GP practice the <code>RecipientType</code> <strong>MUST</strong> be set to fixed value of <code>FI</code> ('For information') taken from FHIR ValueSet <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-RecipientType-1\">ITK-RecipientType-1</a> <br/>  <br/>\"For information\" in this case indicates that the recipient is not expected to take action but should attach the payload contents to the patient record.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>."
  tooltip: "'RecipientType' MUST be set to fixed value of 'FI<' (For information) taken from FHIR ValueSet ITK-RecipientType-1 when send a copy message to the patient's registered GP practice"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-057
  area: itk
  description: "<code>BusAckRequested</code> <strong>MUST</strong> be set to fixed value of <code>true</code>. This will request an ITK3 Response with a response code in the range 30001 to 30003.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'BusAckRequested' MUST be set to fixed value of 'true'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-058
  area: itk
  description: "<code>InfAckRequested</code> <strong>MUST</strong> be set to fixed value of <code>true</code>. This will request an ITK3 Response with a response code in the range 10001 to 20013.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'InfAckRequested' MUST be set to fixed value of 'true'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-059
  area: itk
  description: "<code>SenderReference</code> <strong>MUST</strong> be set to the unique identifier of the encounter which has taken place at the sender organisation.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'SenderReference' MUST be set to the unique identifier of the encounter which has taken place at the sender organisation"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-060
  area: itk
  description: "<code>MessageDefinition</code> <strong>MUST</strong> be set to fixed value of <code>https://fhir.nhs.uk/STU3/MessageDefinition/ITK-GPConnectSendDocument-MessageDefinition-1</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'MessageDefinition' MUST be set to fixed value of 'https://fhir.nhs.uk/STU3/MessageDefinition/ITK-GPConnectSendDocument-MessageDefinition-1'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-061
  area: itk
  description: "<code>LocalExtension</code> <strong>MUST</strong> be set to fixed value of <code>SendDocument-OnlineConsultationReport</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'LocalExtension' MUST be set to fixed value of 'SendDocument-ConsultationReport'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-062
  area: itk
  description: "<code>Sender</code> <strong>MUST</strong> contain a reference to the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1\">CareConnect-ITK-Header-Organization-1</a> resource present in the FHIR message bundle"
  tooltip: "'Sender' MUST contain a reference to the CareConnect-ITK-Header-Organization-1 resource present in the FHIR message bundle"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-063
  area: itk
  description: "<code>Source</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender"
  tooltip: "'Source' MUST contain the MESH mailbox ID of the sender"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-064
  area: itk
  description: "<code>Event</code> <strong>MUST</strong> contain a fixed value of <code>ITK007C</code> from code system <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2\">ITK-MessageEvent-2</a>"
  tooltip: "'Event' MUST contain a fixed value of 'ITK007C' from code system ITK-MessageEvent-2"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-065
  area: itk
  description: "<code>Timestamp</code> <strong>MUST</strong> contain the date/time when the message was generated. (A separate process such as the MESH client may be responsible for sending the message at a later date/time.)"
  tooltip: "'Timestamp' MUST contain the date/time when the message was generated"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-066
  area: itk1
  description: "<code>destination</code> and <code>receiver</code> <strong>MUST NOT</strong> be present. Rather, <a href=\"senddocument_fedcon_mesh.html\">MESH message routing</a> will be used to route message to registered GP practice by NHS Number, DOB and Surname"
  tooltip: "'destination' and 'receiver' MUST NOT be present"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-067
  area: itk2
  description: "<code>BusAckRequested</code> <strong>MUST</strong> contain a fixed value of <code>false</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'BusAckRequested' MUST contain a fixed value of 'false'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-068
  area: itk2
  description: "<code>InfAckRequested</code> <strong>MUST</strong> contain a fixed value of <code>false</code><br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'InfAckRequested' MUST contain a fixed value of 'false'"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-069
  area: itk2
  description: "<code>SenderReference</code> <strong>MUST</strong> contain the same unique identifier generated by GPCM-SD-042.<br/><br/>This item is found in the <code>ITKMessageHandling</code> extension within the <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2\">ITK3 Message Header</a>"
  tooltip: "'SenderReference' MUST contain the same unique identifier generated by GPCM-SD-042"
  page: senddocument_fedcon_itk3.html
  
- id: GPCM-SD-OC-070
  area: itk2
  description: "<code>Sender</code> <strong>MUST</strong> contain a reference to an <a href=\"https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1\">CareConnect-ITK-Header-Organization-1</a> resource present in the FHIR message bundle" 
  tooltip: "'Sender' MUST contain a reference to an CareConnect-ITK-Header-Organization-1 resource present in the FHIR message bundle" 
  page: senddocument_fedcon_itk3.html
 
- id: GPCM-SD-OC-071
  area: itk2
  description: "<code>Event</code> <strong>MUST</strong> contain a fixed value of <code>ITK008M</code> from code system <a href=\"https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2\">ITK-MessageEvent-2</a>"  
  tooltip: "'Event<' MUST contain a fixed value of 'ITK008M' from code system ITK-MessageEvent-2"
  page: senddocument_fedcon_itk3.html

- id: GPCM-SD-OC-072
  area: itk2
  description: "<code>Timestamp</code> <strong>MUST</strong> contain the date/time when the response was generated."
  tooltip: "'Timestamp' MUST contain the date/time when the message was generated"
  page: senddocument_fedcon_itk3.html

#MESH requirements 
- id: GPCM-SD-OC-073
  area: mesh
  description: "all messages sent through this use case to non-GP practice care providers <strong>MUST</strong> use the MESH API Address Lookup function to lookup the MESH mailbox ID of the receiving care provider. <br/><br/>Details of how to use Address Lookup can be found on the <a href=\"https://digital.nhs.uk/developer/api-catalogue/message-exchange-for-social-care-and-health-api#api-Endpoints-meshAddressLookup-0\">MESH API page</a>"
  tooltip: "all messages sent through this use case MUST use the MESH API to lookup the MESH mailbox ID of the receiving care provider"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-074
  area: mesh1
  description: "each instance of a Online Consultation Report message <strong>MUST</strong> include the following MESH Workflow ID in the MESH message metadata: <code>GPFED_CONSULT_REPORT</code>"
  tooltip: "each instance of a Consultation Report message MUST include the following MESH Workflow ID in the MESH message metadata: 'GPFED_CONSULT_REPORT'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-075
  area: mesh1
  description: "each instance of an acknowledgement message generated as a result of receipt of a Online Consultation Report message <strong>MUST</strong> include the following Workflow ID in the MESH message metadata: <code>GPFED_CONSULT_REPORT_ACK</code>"
  tooltip: "each instance of an acknowledgement message generated as a result of receipt of a Online Consultation Report message MUST include the following Workflow ID in the MESH message metadata: 'GPFED_CONSULT_REPORT_ACK'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-076
  area: mesh3
  description: "<code>Mex-From</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender of the message – in this case the originating organisation"
  tooltip: "'Mex-From' MUST contain the MESH mailbox ID of the sender of the message"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-077
  area: mesh3
  description: "<code>Mex-To</code> <strong>MUST</strong> contain the MESH mailbox ID of the receiver of the message – in this case either the mailbox ID for the patient's registered GP practice, or chosen community pharmacy"
  tooltip: "'Mex-To' MUST contain the MESH mailbox ID of the receiver of the message – in this case either the mailbox ID for the patient's registered GP practice, or chosen community pharmacy"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-078
  area: mesh3
  description: "<code>Mex-Subject</code> <strong>MUST</strong> contain <code>To</code> text in the following format:<br/><br/><code>Online consultation report for {Patient Name} , NHS Number {NHS Number}, ODS Code {ODS Code}</code>"
  tooltip: "'Mex-Subject' MUST contain 'To' text in the following format: 'Online consultation report for {Patient Name} , NHS Number {NHS Number}, ODS Code {ODS Code}'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-079
  area: mesh2
  description: "<code>From_DTS</code> <strong>MUST</strong> contain the MESH mailbox ID of the sender of the message – in this case the originating organisation"
  tooltip: "'From_DTS' MUST contain the MESH mailbox ID of the sender of the message"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-080
  area: mesh2
  description: "<code>To_DTS</code> <strong>MUST</strong> contain the NHS Number, DOB and Surname of the patient delimited by the underscore character ‘_'. This enables automatic routing of the message to the registered GP MESH mailbox"
  tooltip: "'To_DTS' MUST contain the NHS Number, DOB and Surname of the patient delimited by the underscore character '_'"
  page: senddocument_fedcon_mesh.html

- id: GPCM-SD-OC-081
  area: mesh2
  description: "<code>Subject</code> <strong>MUST</strong> contain <code>To</code> text in the following format:<br/><br/><code>Online consultation report for {Patient Name} , NHS Number {NHS Number}, ODS Code {ODS Code}</code>"
  tooltip: "'Subject' MUST contain 'To 'text in the following format: 'Online consultation report for {Patient Name} , NHS Number {NHS Number}, ODS Code {ODS Code}'"
  page: senddocument_fedcon_mesh.html 
  
  #Trigger requirements
- id: GPCM-SD-076
  area: trigger
  description: "an Online Consultation Report message <strong>MUST</strong> be sent for 100% of clinically relevant online consultation encounters to ensure that the patient receives the correct care at the care setting receiving the message"
  tooltip: "an Online Consultation Report message MUST be sent for 100% of clinically relevant online consultation encounters to ensure that the patient receives the correct care at the care setting receiving the messag"
  page: senddocument_oc_trigger.html
 

  
- id: GPCM-SD-083
  area: trigger2
  description: "<strong>Step 1</strong> - if the patient registration type of the patient record at the appointment hosting organisation is Regular (GMS/PMS), meaning, the registered practice care record is already up-to-date, then a message <strong>MUST NOT</strong> be sent"
  tooltip: "if the patient registration type of the patient record at the appointment hosting organisation is Regular (GMS/PMS), meaning, the registered practice care record is already up-to-date, then a message MUST NOT be sent"
  page: senddocument_oc_trigger.html

- id: GPCM-SD-084
  area: trigger2
  description: "<strong>Step 2</strong> - a PDS lookup of the patient <strong>MUST</strong> be performed to determine the ODS code of the registered practice of the patient"
  tooltip: "a PDS lookup of the patient MUST be performed to determine the ODS code of the registered practice of the patient"
  page: senddocument_oc_trigger.html

- id: GPCM-SD-140
  area: trigger2
  description: "<strong>Step 3</strong> - the Consultation Report <strong>MUST</strong> only be sent when flagged as clinically relevant. Administration items <strong>SHOULD NOT</strong> be sent"
  tooltip: "the Consultation Report MUST only be sent when flagged a clinically relevant. Administration items SHOULD NOT be sent"
  page: senddocument_oc_trigger.html
  
- id: GPCM-SD-141
  area: trigger2
  description: "a configurable control <strong>MUST</strong> perform a final check to ensure that the sender wants to send the Consultation Report. This could be delivered in the form of a pop-up box. The sending organisation <strong>MUST</strong> be able to switch this functionality off if required"
  tooltip: "a configurable control MUST perform a final check to ensure that the sender wants to send the Consultation Report"
  page: senddocument_oc_trigger.html

- id: GPCM-SD-096
  area: trigger3
  description: "the message sender system <strong>MUST</strong> send the Consultation Report within 3 hours after the consultation was created or last update"
  tooltip: "the message sender system MUST send the Consultation Report within 3 hours after the consultation was created or last update"
  page: senddocument_oc_trigger.html
  
- id: GPCM-SD-142
  area: trigger3
  description: "the message sender system <strong>MUST</strong> only send the most recent version of the Consultation Report within the 3 hour window"
  tooltip: "the message sender system MUST send the most recent version of the Consultation Report within the 3 hour window"
  page: senddocument_oc_trigger.html

- id: GPCM-SD-135
  area: trigger4
  description: "the sender system <strong>MUST</strong> give a warning message to the user. The warning message <strong>MUST</strong> include the <code>patient name</code>, <code>NHS number</code>, <code>consultation date</code> and the patient's <code>registered GP practice</code>"
  tooltip: "when a user deletes a consultation where a Consultation Report has been sent, the sender system must give a warning message to the user"
  page: senddocument_oc_trigger.html 

#Miscellaneous requirements  
- id: "None"
  area: na
  description: "None applicable"
  tooltip: "no requirements are documented in this specification for this user story"
  page:
  
- id: "GFR"
  area: na
  description: "Generic FHIR receiver"
  tooltip: "requirements delivered by the Generic FHIR receiver"
  page: 
  
- id: "ITK"
  area: na
  description: "ITK"
  tooltip: "requirements delivered by ITK"
  page: 